ACORN_Aggregation V2.0# Readme
April 2012

Thank you for using ACORN_Aggregation, version 2.0. The readme contains the following main sections:

Installation
System requirements
Upgrade and compatibility issues
New features
Fixed issues
Tips
Contact Support

== Installation ==
1. Copy the folder "ACORN_Aggregation" or checkout the last subversion byt typing in you shell :
   'rm -rf [ProgramLocationDestination];   svn export  https://svn.emii.org.au/repos/ACORN_Aggregation/trunk/ [ProgramLocationDestination]
2. Open config.txt to modify if necessary :
-AGGREGATED_DATA_FOLDER	:the folder where data will be downloaded and processed :requires lots of space, 20 GB is comfortable
-DF_ROOT		:the DataFabric location, mount with webdav
-aggregationType	:a string 'month' or 'year' to define the type of aggregation we want
-acornStation		:any station to aggregate can be added here.
3.add in your matlab javapath (could be in startup.m)
javaaddpath('[ProgramLocationDestination]/ACORN_Aggregation_MATLAB/myJavaClasses/toolsUI-4.2.jar')
javaaddpath('[ProgramLocationDestination]/ACORN_Aggregation_MATLAB/myJavaClasses/postgresql-9.1-902.jdbc4.jar')
4. Open AggregateACORN.sh to modify the [ProgramLocation] folder in order to execute Aggregate_ACORN.m and the email address for the program outputs
5. Create a link of AggregateACORN.sh to /usr/bin/ by executing in you shell 
sudo ln -s /[ProgramLocation]/AggregateACORN.sh /usr/local/bin/AggregateACORN
7. Execute the program by typing in your shell 'AggregateACORN'

WARNING: Make sure the permission to the datafabric are well setup for each user on each folder

== System Requirements ==
Internet connection
Tested with MATLAB R2011b

Operating System Support
The following operating systems are supported under V2.0:
Ubuntu 9.10 (cat /etc/issue to check your version)

To find and download an earlier version that might supports other operating systems, refer to:
https://svn.emii.org.au/repos/ACORN_Aggregation/trunk/


== Upgrade Issue Heading ==


== New Features Added ==
The following features were added in V1.0:


== Fixed Issues ==
The following issues were fixed in V2.0

Issue ID	Summary


== Tips ==
In order to move the software folders localy to a virtual machine through SSH, here are the following steps
# to do localy
tar cfz - /var/lib/matlab_2_DATA/ACORN/Aggregation_DATA | ssh lbesnard@emii3-vm2.its.utas.edu.au "tar zxvf - -C ~/IMPORT"
or
tar cfz - /media/Laurent_emII/ACORN/ACORN_AggregationDATA/ | ssh lbesnard@emii3-vm2.its.utas.edu.au "tar zxvf - -C ~/IMPORT"

# to do on the VM as matlab_2 user for ACORN, on a shell type :
sudo rm -rf /var/lib/matlab_2_DATA/ACORN/Aggregation_DATA
sudo mv ~/IMPORT/var/lib/matlab_2_DATA/ACORN/Aggregation_DATA /var/lib/matlab_2_DATA/ACORN/Aggregation_DATA
or
sudo mv ~/IMPORT/media/Laurent_emII/ACORN/ACORN_AggregationDATA/ /var/lib/matlab_2_DATA/ACORN/Aggregation_DATA
sudo chown matlab_2:matlab_2 -R /var/lib/matlab_2_DATA/

If we want to add/update the scripts with a newer version
# to update ACORN from svn, as matlab_2, on a shell type :
UPDATE_SVN_ACORN_aggregation.sh 		#(content of the script rm -rf /usr/local/harvesters/matlab_2/svn/ACORN/ACORN_Aggregation_MATLAB;   svn export  https://svn.emii.org.au/repos/ACORN_Aggregation/trunk/ACORN_Aggregation_MATLAB /usr/local/harvesters/matlab_2/svn/ACORN/ACORN_Aggregation_MATLAB)

# to create a link usable by anyuser, as root do
sudo ln -s /usr/local/harvesters/matlab_2/svn/ACORN/ACORN_Aggregation_MATLAB/AggregateACORN.sh  /usr/local/bin/ACORN_aggregation
chmod 755 /usr/local/harvesters/matlab_2/svn/ACORN/ACORN_Aggregation_MATLAB/AggregateACORN.sh

# in matlab_2 bashrc, we should have this following line:
export PATH=${PATH}:/usr/local/bin/:~/scripts/ 

# in order to use the command as matlab_2 , symply type:
ACORN_aggregation

== Contact Support ==
for support contact:
Email: laurent.besnard@utas.edu.au
