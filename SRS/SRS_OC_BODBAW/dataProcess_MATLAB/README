README BioOptical Database V2.0# Readme
July 2012
Installation
Run
Tips
Contact Support

== Installation ==
1. Copy the folder "IMOS_BioOptical_DB" or checkout the last subversion byt typing in you shell :
   'rm -rf [ProgramLocationDestination];   svn export  https://svn.emii.org.au/repos/IMOS_BioOptical_DB/branches/v2_0 [ProgramLocationDestination]

	== Convert XLS to CSV ==
	In Order to convert xls files to csv, it is essential to install the perl xls2csv program, make sure you don't have xls2csv from catdoc already installed,
	otherwise use the modified version in /xls2csv_source/xls2csv-1.07_modified.tar.gz
	The program will be installed with the name xls2csv_PERL

		== Pre-configuration ==
		Open a terminal from the Netbook panel Accessories > Terminal
		In the terminal, type the command as ROOT sudo su -: 

		perl -MCPAN -e shell 		 (this will open a CPAN shell session in the terminal
		In the terminal cpan shell, type the command :
		install CPAN (this will upgrade the version of CPAN if required)
		reload CPAN (this will reload to use the new version of CPAN)
		install YAML (this will install YAML which is a machine parsable data serialization format designed for human readability and interaction with scripting languages such as Perl)
		install Locale::Recode
		install Unicode::Map
		install Spreadsheet::ParseExcel
		install Spreadsheet::ParseExcel::FmtUnicode
		install Text::CSV_XS
		install HTML::Template 
		exit (this will close the CPAN shell session)

		In the terminal, type the command
		exit (this will logout from the ROOT user role)
		exit (this will close the terminal)

		== Installing xls2csv ==
		Open a terminal from the Netbook panel Accessories > Terminal
		In the terminal, type the command : 
		sudo-i (this will prompt for your password and logon as ROOT user)
		wget http://search.cpan.org/CPAN/authors/id/K/KE/KEN/xls2csv-1.07.tar.gz
		tar zxpfv xls2csv-1.07.tar.gz
		cd xls2csv-1.07

		== MODIFICATION OF THE FILE ==
		gedit xls2csv-1.07/scripts/xls2csv

		search for the line : 'sep_char'    => ','
		and modify it by 'sep_char'    => '|'
		save the file

		== Install the package ==
		cd [PROGRAM_LOCATION]/xls2csv_source/xls2csv-1.07_modified.tar.gz
		tar -xf xls2csv-1.07_modified.tar.gz 
		cd [PROGRAM_LOCATION]/xls2csv_source/xls2csv-1.07_modified
		perl Makefile.PL
		make
		make test
		sudo make install
		cd ..
		rm -rf [PROGRAM_LOCATION]/xls2csv_source/xls2csv-1.07_modified
		exit (this will logout from ROOT user role)
		exit (this will close the terminal)


		=== Need to Install the IMOS USER CODE LIBRARY ===
		https://github.com/aodn/imos-user-code-library/
		https://github.com/aodn/imos-user-code-library/wiki/Using-the-IMOS-User-Code-Library-with-MATLAB

2. Modify config.txt to give the path of the pigment absorption and backscattering XLS or CSV files
== Run ==
mainAbsorption.m	: Process Absorption DATA. Convert XLS 2 CSV, and create a NetCDF file and a PSQL script to load in a POSTGIS db + plots 
mainPigment.m		: Process Pigment DATA. Convert XLS 2 CSV, and create a NetCDF file and a PSQL script to load in a POSTGIS db + plots
mainAC9_HS6.m		: Process AC9-HS6 DATA. Create a NetCDF file and a pSQL script to load in a POSTGIS db + plots from CSV files
NRS_phyto.m		: Process Phytoplankton DATA. Convert XLS 2 CSV, and create a NetCDF file and a pSQL script to load in a POSTGIS db


