########################################
# unit tests for srs sst path hierachy #
########################################
test_srs_file_path() {
  local srs_input_filename=`mktemp`
  cat <<EOF > $srs_input_filename
19950309232523-ABOM-L3U_GHRSST-SSTskin-AVHRR09_D-Des_Southern-v02.0-fv02.0.nc
20151204200948-ABOM-L3U_GHRSST-SSTskin-AVHRR19_D-Des_Southern-v02.0-fv01.0.nc
19950309232523-ABOM-L3U_GHRSST-SSTskin-AVHRR09_D-Asc-v02.0-fv02.0.nc
20151204200948-ABOM-L3U_GHRSST-SSTskin-AVHRR19_D-Asc-v02.0-fv01.0.nc
19950309232523-ABOM-L3U_GHRSST-SSTskin-AVHRR09_D-Des-v02.0-fv02.0.nc
20151204200948-ABOM-L3U_GHRSST-SSTskin-AVHRR19_D-Des-v02.0-fv01.0.nc
19950309232523-ABOM-L3U_GHRSST-SSTskin-AVHRR09_D-Asc-v02.0-fv02.0.nc
20151204200948-ABOM-L3U_GHRSST-SSTskin-AVHRR19_D-Asc-v02.0-fv01.0.nc
20151201152000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-6d_day-v02.0-fv01.0.nc
20151201212000-ABOM-L3S_GHRSST-SSTfnd-AVHRR_D-6d_dn-v02.0-fv01.0.nc
20151202032000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-6d_night-v02.0-fv01.0.nc
20151203152000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-3d_night-v02.0-fv01.0.nc
2015/20151203032000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-3d_day-v02.0-fv01.0.nc
20151203092000-ABOM-L3S_GHRSST-SSTfnd-AVHRR_D-3d_dn-v02.0-fv01.0.nc
20151130231000-ABOM-L3S_GHRSST-SSTfnd-AVHRR_D-1m_dn_Southern-v02.0-fv01.0.nc
20151130032000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-1m_night-v02.0-fv01.0.nc
20150131092000-ABOM-L3S_GHRSST-SSTfnd-AVHRR_D-1m_dn-v02.0-fv01.0.nc
20151130152000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-1m_day-v02.0-fv01.0.nc
20151204111000-ABOM-L3S_GHRSST-SSTfnd-AVHRR_D-1d_dn_Southern-v02.0-fv01.0.nc
2015/20151204152000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-1d_night-v02.0-fv01.0.nc
20151204092000-ABOM-L3S_GHRSST-SSTfnd-AVHRR_D-1d_dn-v02.0-fv01.0.nc
20151204032000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-1d_day-v02.0-fv01.0.nc
20151128032000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-14d_night-v02.0-fv01.0.nc
20151127212000-ABOM-L3S_GHRSST-SSTfnd-AVHRR_D-14d_dn-v02.0-fv01.0.nc
20151127152000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-14d_day-v02.0-fv01.0.nc
20151203152000-ABOM-L3C_GHRSST-SSTskin-AVHRR19_D-3d_night-v02.0-fv01.0.nc
20151203032000-ABOM-L3C_GHRSST-SSTskin-AVHRR19_D-3d_day-v02.0-fv01.0.nc
20151204171000-ABOM-L3C_GHRSST-SSTskin-AVHRR19_D-1d_night_Southern-v02.0-fv01.0.nc
20151204051000-ABOM-L3C_GHRSST-SSTskin-AVHRR19_D-1d_day_Southern-v02.0-fv01.0.nc
20151204152000-ABOM-L3C_GHRSST-SSTskin-AVHRR19_D-1d_night-v02.0-fv01.0.nc
20151204032000-ABOM-L3C_GHRSST-SSTskin-AVHRR19_D-1d_day-v02.0-fv01.0.nc
19990207111000-ABOM-L3S_GHRSST-SSTfnd-AVHRR_D-1d_dn_Southern-v02.0-fv02.0.nc
20150623092000-ABOM-L3S_GHRSST-SSTfnd-AVHRR_D-1d_dn-v02.0-fv01.0.nc
20151203032000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-1d_day.nc
20151130152000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-1d_night.nc
20151203032000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-1d_dn.nc
20151203032000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-3d_dn.nc
20151203032000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-6d_dn.nc
19921231092000-ABOM-L3S_GHRSST-SSTfnd-AVHRR_D-1m_dn.nc
20150722152000-ABOM-L3C_GHRSST-SSTskin-AVHRR19_D-3d_night.nc
20151130152000-ABOM-L3C_GHRSST-SSTskin-AVHRR19_D-1d_night.nc
20131011153743-ABOM-L3U_GHRSST-SSTskin-AVHRR19_D-Des_Southern.nc
20151201185911-ABOM-L3U_GHRSST-SSTskin-AVHRR19_D-Des.nc
20100726104543-ABOM-L3U_GHRSST-SSTskin-MTSAT_1R-CRTM-v02.0-fv01.0.nc
EOF
    # not sure yet if those 2 file types need to be tested and added to the pipeline
    #20140428-ABOM-L3P_GHRSST-SSTsubskin-AVHRR_MOSAIC_01km-AO_DAAC-v01-fv01_0.nc4

    local srs_output_path=`mktemp`
    cat <<EOF > $srs_output_path
sst/ghrsst/L3U-S/n09/1995/19950309232523-ABOM-L3U_GHRSST-SSTskin-AVHRR09_D-Des_Southern.nc
sst/ghrsst/L3U-S/n19/2015/20151204200948-ABOM-L3U_GHRSST-SSTskin-AVHRR19_D-Des_Southern.nc
sst/ghrsst/L3U/n09/1995/19950309232523-ABOM-L3U_GHRSST-SSTskin-AVHRR09_D-Asc.nc
sst/ghrsst/L3U/n19/2015/20151204200948-ABOM-L3U_GHRSST-SSTskin-AVHRR19_D-Asc.nc
sst/ghrsst/L3U/n09/1995/19950309232523-ABOM-L3U_GHRSST-SSTskin-AVHRR09_D-Des.nc
sst/ghrsst/L3U/n19/2015/20151204200948-ABOM-L3U_GHRSST-SSTskin-AVHRR19_D-Des.nc
sst/ghrsst/L3U/n09/1995/19950309232523-ABOM-L3U_GHRSST-SSTskin-AVHRR09_D-Asc.nc
sst/ghrsst/L3U/n19/2015/20151204200948-ABOM-L3U_GHRSST-SSTskin-AVHRR19_D-Asc.nc
sst/ghrsst/L3S-6d/day/2015/20151201152000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-6d_day.nc
sst/ghrsst/L3S-6d/dn/2015/20151201212000-ABOM-L3S_GHRSST-SSTfnd-AVHRR_D-6d_dn.nc
sst/ghrsst/L3S-6d/ngt/2015/20151202032000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-6d_night.nc
sst/ghrsst/L3S-3d/ngt/2015/20151203152000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-3d_night.nc
sst/ghrsst/L3S-3d/day/2015/20151203032000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-3d_day.nc
sst/ghrsst/L3S-3d/dn/2015/20151203092000-ABOM-L3S_GHRSST-SSTfnd-AVHRR_D-3d_dn.nc
sst/ghrsst/L3S-1mS/dn/2015/20151130231000-ABOM-L3S_GHRSST-SSTfnd-AVHRR_D-1m_dn_Southern.nc
sst/ghrsst/L3S-1m/ngt/2015/20151130032000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-1m_night.nc
sst/ghrsst/L3S-1m/dn/2015/20150131092000-ABOM-L3S_GHRSST-SSTfnd-AVHRR_D-1m_dn.nc
sst/ghrsst/L3S-1m/day/2015/20151130152000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-1m_day.nc
sst/ghrsst/L3S-1dS/dn/2015/20151204111000-ABOM-L3S_GHRSST-SSTfnd-AVHRR_D-1d_dn_Southern.nc
sst/ghrsst/L3S-1d/ngt/2015/20151204152000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-1d_night.nc
sst/ghrsst/L3S-1d/dn/2015/20151204092000-ABOM-L3S_GHRSST-SSTfnd-AVHRR_D-1d_dn.nc
sst/ghrsst/L3S-1d/day/2015/20151204032000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-1d_day.nc
sst/ghrsst/L3S-14d/ngt/2015/20151128032000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-14d_night.nc
sst/ghrsst/L3S-14d/dn/2015/20151127212000-ABOM-L3S_GHRSST-SSTfnd-AVHRR_D-14d_dn.nc
sst/ghrsst/L3S-14d/day/2015/20151127152000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-14d_day.nc
sst/ghrsst/L3C-3d/ngt/n19/2015/20151203152000-ABOM-L3C_GHRSST-SSTskin-AVHRR19_D-3d_night.nc
sst/ghrsst/L3C-3d/day/n19/2015/20151203032000-ABOM-L3C_GHRSST-SSTskin-AVHRR19_D-3d_day.nc
sst/ghrsst/L3C-1dS/ngt/n19/2015/20151204171000-ABOM-L3C_GHRSST-SSTskin-AVHRR19_D-1d_night_Southern.nc
sst/ghrsst/L3C-1dS/day/n19/2015/20151204051000-ABOM-L3C_GHRSST-SSTskin-AVHRR19_D-1d_day_Southern.nc
sst/ghrsst/L3C-1d/ngt/n19/2015/20151204152000-ABOM-L3C_GHRSST-SSTskin-AVHRR19_D-1d_night.nc
sst/ghrsst/L3C-1d/day/n19/2015/20151204032000-ABOM-L3C_GHRSST-SSTskin-AVHRR19_D-1d_day.nc
sst/ghrsst/L3S-1dS/dn/1999/19990207111000-ABOM-L3S_GHRSST-SSTfnd-AVHRR_D-1d_dn_Southern.nc
sst/ghrsst/L3S-1d/dn/2015/20150623092000-ABOM-L3S_GHRSST-SSTfnd-AVHRR_D-1d_dn.nc
sst/ghrsst/L3S-1d/day/2015/20151203032000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-1d_day.nc
sst/ghrsst/L3S-1d/ngt/2015/20151130152000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-1d_night.nc
sst/ghrsst/L3S-1d/dn/2015/20151203032000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-1d_dn.nc
sst/ghrsst/L3S-3d/dn/2015/20151203032000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-3d_dn.nc
sst/ghrsst/L3S-6d/dn/2015/20151203032000-ABOM-L3S_GHRSST-SSTskin-AVHRR_D-6d_dn.nc
sst/ghrsst/L3S-1m/dn/1992/19921231092000-ABOM-L3S_GHRSST-SSTfnd-AVHRR_D-1m_dn.nc
sst/ghrsst/L3C-3d/ngt/n19/2015/20150722152000-ABOM-L3C_GHRSST-SSTskin-AVHRR19_D-3d_night.nc
sst/ghrsst/L3C-1d/ngt/n19/2015/20151130152000-ABOM-L3C_GHRSST-SSTskin-AVHRR19_D-1d_night.nc
sst/ghrsst/L3U-S/n19/2013/20131011153743-ABOM-L3U_GHRSST-SSTskin-AVHRR19_D-Des_Southern.nc
sst/ghrsst/L3U/n19/2015/20151201185911-ABOM-L3U_GHRSST-SSTskin-AVHRR19_D-Des.nc
sst/ghrsst/L3U/mtsat1r/2010/07/20100726104543-ABOM-L3U_GHRSST-SSTskin-MTSAT_1R-CRTM.nc
EOF

    assertEquals "Check SRS path is valid" "`cat $srs_output_path`" "`cat $srs_input_filename | xargs -L 1 $DATA_SERVICES_DIR/SRS/srs_gridded_pipeline/sst_destination_path.sh`"
    rm $srs_input_filename $srs_output_path
}


# load and run shUnit2
. /usr/share/shunit2/shunit2
